<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="emacs-pager : use a buffer as $PAGER when using emacs as your terminal" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>emacs-pager</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mbriggs/emacs-pager">View on GitHub</a>

          <h1 id="project_title">emacs-pager</h1>
          <h2 id="project_tagline">use a buffer as $PAGER when using emacs as your terminal</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mbriggs/emacs-pager/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mbriggs/emacs-pager/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="emacs-pagerel" class="anchor" href="#emacs-pagerel"><span class="octicon octicon-link"></span></a>emacs-pager.el</h1>

<p>I use emacs <code>shell-mode</code> buffers almost exclusively, which usually
works great, except for when something wants to page. Things like
<code>less</code> dont really work that great in <code>shell-mode</code>, and in general I
would prefer a normal emacs buffer for this anyways.</p>

<p>Unfortunately, <code>emacsclient</code> doesnt really work with piped content, so
actually achieving that goal requires
<a href="https://www.youtube.com/watch?v=cv5WLLYo-fk">Rube Goldberg-ian</a>
changes at quite a few points.</p>

<h3>
<a name="how-this-works" class="anchor" href="#how-this-works"><span class="octicon octicon-link"></span></a>How this works</h3>

<p>Well-behaving unix programs will use whatever is in <code>$PAGER</code> when
showing data that is too big to fit in a terminal screen. So in the
shell, we will set <code>$PAGER</code> to a script, but only if emacs is
currently running. That script will read the piped data, and write it
to a file in <code>/tmp</code>, read it into emacs via <code>emacsclient</code>, and wait
until emacs is done with it. In emacs, it will use a small mode for
ANSI coloring and keybinds.</p>

<p>Given that sometimes things are paged because they are tens of thousands
of lines long (or more), <code>emacs-pager</code> will only color the first 500 lines.
That number can be customized with <code>emacs-pager-max-line-coloring</code></p>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<p>Make sure you are running an emacs server, so <code>emacsclient</code> will
work. This is what I currently use in my init.el</p>

<pre><code>(require 'server)
(unless (server-running-p)
  (server-start))
</code></pre>

<p>Make sure that <code>emacsclient</code> is available on your path.</p>

<p>Put <code>emacs-pager</code> (from this repository) somewhere in your path, and
make sure it is executable. This will be the thing that accepts the
piped data, and sends it to emacs.</p>

<p>In your <code>.bashrc</code> or <code>.zshrc</code> file, put something like this</p>

<pre><code>if [ $INSIDE_EMACS ]; then
    export PAGER="emacs-pipe"
elif [ -x "`which less`" ]; then
    export PAGER="`which less`"
    export LESS="-isR"
    alias lv="less"
else
    export PAGER="/bin/more"
fi
</code></pre>

<p>Put <code>emacs-pager.el</code> somewhere on your load-path, and require it. Or,
better then that, use something like el-get or quelpa to package it up
in a sane manner and make it available for requiring.</p>

<p>Personally, I use (and love) quelpa, here is what I have in my configs</p>

<pre><code>(quelpa '(emacs-pager :repo "mbriggs/emacs-pager" :fetcher github))
</code></pre>

<p>Somewhere in your emacs init files, add the following line</p>

<pre><code>(add-to-list 'auto-mode-alist '("\\.emacs-pager$" . emacs-pager-mode))
</code></pre>

<h3>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h3>

<p><code>M-x shell</code>, and run a command that will invoke a pager (example would
be <code>git log --pretty=oneline -n 20 --graph</code>). You should see the
output in a new buffer. Press <code>q</code> to close the buffer.</p>

<p>If you go to an external terminal and run the same command, you should
see normal pager behaviour.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">emacs-pager maintained by <a href="https://github.com/mbriggs">mbriggs</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
