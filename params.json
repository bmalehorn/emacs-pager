{"name":"Emacs-pager","tagline":"use a buffer as $PAGER when using emacs as your terminal","body":"# emacs-pager.el\r\n\r\nI use emacs `shell-mode` buffers almost exclusively, which usually\r\nworks great, except for when something wants to page. Things like\r\n`less` dont really work that great in `shell-mode`, and in general I\r\nwould prefer a normal emacs buffer for this anyways.\r\n\r\nUnfortunately, `emacsclient` doesnt really work with piped content, so\r\nactually achieving that goal requires\r\n[Rube Goldberg-ian](https://www.youtube.com/watch?v=cv5WLLYo-fk)\r\nchanges at quite a few points.\r\n\r\n### How this works\r\n\r\nWell-behaving unix programs will use whatever is in `$PAGER` when\r\nshowing data that is too big to fit in a terminal screen. So in the\r\nshell, we will set `$PAGER` to a script, but only if emacs is\r\ncurrently running. That script will read the piped data, and write it\r\nto a file in `/tmp`, read it into emacs via `emacsclient`, and wait\r\nuntil emacs is done with it. In emacs, it will use a small mode for\r\nANSI coloring and keybinds.\r\n\r\nGiven that sometimes things are paged because they are tens of thousands\r\nof lines long (or more), `emacs-pager` will only color the first 500 lines.\r\nThat number can be customized with `emacs-pager-max-line-coloring`\r\n\r\n### Installation\r\n\r\nMake sure you are running an emacs server, so `emacsclient` will\r\nwork. This is what I currently use in my init.el\r\n\r\n\r\n    (require 'server)\r\n    (unless (server-running-p)\r\n      (server-start))\r\n\r\nMake sure that `emacsclient` is available on your path.\r\n\r\nPut `emacs-pager` (from this repository) somewhere in your path, and\r\nmake sure it is executable. This will be the thing that accepts the\r\npiped data, and sends it to emacs.\r\n\r\nIn your `.bashrc` or `.zshrc` file, put something like this\r\n\r\n\r\n    if [ $INSIDE_EMACS ]; then\r\n        export PAGER=\"emacs-pipe\"\r\n    elif [ -x \"`which less`\" ]; then\r\n        export PAGER=\"`which less`\"\r\n        export LESS=\"-isR\"\r\n        alias lv=\"less\"\r\n    else\r\n        export PAGER=\"/bin/more\"\r\n    fi\r\n\r\nPut `emacs-pager.el` somewhere on your load-path, and require it. Or,\r\nbetter then that, use something like el-get or quelpa to package it up\r\nin a sane manner and make it available for requiring.\r\n\r\nPersonally, I use (and love) quelpa, here is what I have in my configs\r\n\r\n    (quelpa '(emacs-pager :repo \"mbriggs/emacs-pager\" :fetcher github))\r\n\r\nSomewhere in your emacs init files, add the following line\r\n\r\n    (add-to-list 'auto-mode-alist '(\"\\\\.emacs-pager$\" . emacs-pager-mode))\r\n\r\n### Usage\r\n\r\n`M-x shell`, and run a command that will invoke a pager (example would\r\nbe `git log --pretty=oneline -n 20 --graph`). You should see the\r\noutput in a new buffer. Press `q` to close the buffer.\r\n\r\nIf you go to an external terminal and run the same command, you should\r\nsee normal pager behaviour.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}